import{d as i,r,o as g,g as _,c as m,a,s as l,b as f,e as h,p as v,f as w,_ as I}from"./index-BSeWjq8C.js";const u=s=>(v("data-v-44cfdf6a"),s=s(),w(),s),y={class:"wrap"},S=u(()=>a("h2",null,"我已收到消息!节日快乐!",-1)),b=u(()=>a("h3",null,"你也可以发送图片",-1)),k={class:"sendWrap"},x=i({__name:"SuccessView",setup(s){const t=r(""),n=r("");g(async()=>{try{const o=await _();n.value=o.ip}catch(o){n.value="",console.warn(o)}const e=JSON.parse(localStorage.getItem("myMsg")??'{"username":"noname"}');e?t.value=e.username:t.value="noname"}),console.log("传值",t.value);const c=new FormData,p=e=>{c.set("avatar",e.target.files[0],"["+n.value+"]["+t.value+"]"+e.target.files[0].name)},d=async()=>{l.togglePopup(!0);try{(await f(c)).status==200&&alert("发送图片成功!")}catch(e){alert("发送图片失败!"),console.log("发送图片失败:",e)}l.togglePopup(!1)};return(e,o)=>(h(),m("div",y,[S,b,a("div",k,[a("input",{type:"file",accept:".png,.jpg,.jpeg",name:"avatar",onChange:p},null,32),a("button",{onClick:d},"提交")])]))}}),C=I(x,[["__scopeId","data-v-44cfdf6a"]]);export{C as default};
