import{d as _,r as n,o as m,g,c as f,a as s,s as u,b as h,e as v,p as y,f as w,_ as I}from"./index-DyB909qq.js";const p=a=>(y("data-v-06b4e2c2"),a=a(),w(),a),S={class:"wrap"},b=p(()=>s("h2",null,"我已收到消息!节日快乐!",-1)),k=p(()=>s("h3",null,"你也可以发送图片",-1)),j={class:"sendWrap"},x=_({__name:"SuccessView",setup(a){const c=n(""),o=n(""),r=n("");m(async()=>{try{const t=await g();o.value=t.ip}catch(t){o.value="",console.warn(t)}const e=JSON.parse(localStorage.getItem("myMsg")??'{"username":"noname","key","nokey"}');c.value=e.username,r.value=e.key});const l=new FormData,d=e=>{l.set("avatar",e.target.files[0],"["+o.value+"]["+c.value+"]["+r.value+"]"+e.target.files[0].name)},i=async()=>{u.togglePopup(!0);try{(await h(l)).status==200&&alert("发送图片成功!")}catch{alert("发送图片失败!")}u.togglePopup(!1)};return(e,t)=>(v(),f("div",S,[b,k,s("div",j,[s("input",{type:"file",accept:".png,.jpg,.jpeg",name:"avatar",onChange:d},null,32),s("button",{onClick:i},"提交")])]))}}),C=I(x,[["__scopeId","data-v-06b4e2c2"]]);export{C as default};
